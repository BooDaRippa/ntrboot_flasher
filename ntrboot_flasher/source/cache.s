.arm

//---------------------------------------------------------------------------------
	.global	DTCM_Base
	.type	DTCM_Base STT_FUNC
//---------------------------------------------------------------------------------
DTCM_Base:
/*---------------------------------------------------------------------------------
	Return DTCM Size/Base
---------------------------------------------------------------------------------*/
	mov	r0, #0
	mrc	p15, 0, r0, c9, c1, 0
	bx lr
	
//---------------------------------------------------------------------------------
	.global	ITCM_Base
	.type	ITCM_Base STT_FUNC
//---------------------------------------------------------------------------------
ITCM_Base:
/*---------------------------------------------------------------------------------
	Return ITCM Size/Base
---------------------------------------------------------------------------------*/
	mov	r0, #0
	mrc	p15, 0, r0, c9, c1, 1
	bx lr
	
//---------------------------------------------------------------------------------
	.global	cp15_DumpDataCache
	.type	cp15_DumpDataCache STT_FUNC
//---------------------------------------------------------------------------------
cp15_DumpDataCache:
                MOV     R12, #0

loc_FFFF09C8:
                MOV     R2, #0

loc_FFFF09CC:
                ORR     R3, R2, R12
                MCR     p15, 3, R3,c15,c0, 0
				MRC     p15, 3, R3,c15,c4, 0
                STR     R3, [R0],#4
                ADD     R2, R2, #4
                CMP     R2, #0x400
                BLT     loc_FFFF09CC
                ADD     R12, R12, #0x40000000
                CMP     R12, #0
                BNE     loc_FFFF09C8
                BX      LR
		
//---------------------------------------------------------------------------------
	.global	cp15_DumpInstructionCache
	.type	cp15_DumpInstructionCache STT_FUNC
//---------------------------------------------------------------------------------		
cp15_DumpInstructionCache:
                MOV     R12, #0

loc_FFFF0C08:
                MOV     R2, #0

loc_FFFF0C0C:
                ORR     R3, R2, R12
                MCR     p15, 3, R3,c15,c0, 0
                MRC     p15, 3, R3,c15,c3, 0
                STR     R3, [R0],#4
                ADD     R2, R2, #4
                CMP     R2, #0x800
                BLT     loc_FFFF0C0C
                ADD     R12, R12, #0x40000000
                CMP     R12, #0
                BNE     loc_FFFF0C08
                BX      LR
